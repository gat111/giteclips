# 商品検索、カート、購入処理のブラックボックステスト
## 同値クラス分析と境界値分析

---

## 1. 商品検索処理（ProductAction）

### 同値クラス分析

| 入力項目 | 同値クラス | 代表値 | 期待結果 |
|---------|-----------|--------|----------|
| keyword | 有効なキーワード | "商品名" | 該当商品リスト |
| | 空文字列 | "" | 全商品リスト |
| | null | null | 全商品リスト |
| | 存在しないキーワード | "存在しない商品" | 空リスト |

### 境界値分析

| テストケースID | 入力値 | テスト種別 | 期待結果 |
|---------------|--------|-----------|----------|
| TC-BB-PROD-01 | null | 同値クラス | 全商品検索 |
| TC-BB-PROD-02 | "" | 境界値（最小長） | 全商品検索 |
| TC-BB-PROD-03 | "a" | 境界値（1文字） | 該当商品検索 |
| TC-BB-PROD-04 | "商品名" | 同値クラス | 該当商品検索 |
| TC-BB-PROD-05 | 存在しない長い文字列 | 同値クラス | 空リスト |
| TC-BB-PROD-06 | 特殊文字を含む文字列 | 同値クラス | 該当商品検索（あれば） |

---

## 2. カート追加処理（CartAddAction）

### 同値クラス分析

| 入力項目 | 同値クラス | 代表値 | 期待結果 |
|---------|-----------|--------|----------|
| cart（セッション） | カート存在 | List<Item>あり | 既存カート使用 |
| | カート不存在 | null | 新規カート作成 |
| id（商品ID） | カート内に既存 | 既存商品ID | 数量増加 |
| | カート内に未存在 | 新規商品ID | 新規追加 |
| | 商品リストに存在 | 有効な商品ID | 追加成功 |
| | 商品リストに不存在 | 無効な商品ID | 追加されない |

### 境界値分析

| テストケースID | cart状態 | id | テスト種別 | 期待結果 |
|---------------|----------|----|-----------|----------|
| TC-BB-CART-01 | null | 1 | 新規カート+新規商品 | 新規カート作成＆商品追加 |
| TC-BB-CART-02 | 空リスト | 1 | 既存カート+新規商品 | 既存カート＆商品追加 |
| TC-BB-CART-03 | 既存商品あり | 既存ID | 既存カート+既存商品 | 数量増加 |
| TC-BB-CART-04 | 既存商品あり | 新規ID | 既存カート+新規商品 | 新規商品追加 |
| TC-BB-CART-05 | 既存カート | 存在しないID | 無効商品ID | 追加されない |
| TC-BB-CART-06 | 既存カート | 0 | 境界値（ID=0） | 追加されない |
| TC-BB-CART-07 | 既存カート | -1 | 境界値（負のID） | 追加されない |
| TC-BB-CART-08 | 既存カート | 最大ID+1 | 境界値（最大超過） | 追加されない |

---

## 3. 購入処理（PurchaseAction）

### 同値クラス分析

| 入力項目 | 同値クラス | 代表値 | 期待結果 |
|---------|-----------|--------|----------|
| name | 有効な名前 | "山田太郎" | 処理続行 |
| | 空文字列 | "" | エラー |
| | null | null | エラー |
| address | 有効な住所 | "東京都..." | 処理続行 |
| | 空文字列 | "" | エラー |
| | null | null | エラー |
| cart | 有効なカート | 商品ありのリスト | 処理続行 |
| | 空カート | 空リスト | DB登録失敗 |
| | null | null | エラー |

### 境界値分析

| テストケースID | name | address | cart | テスト種別 | 期待結果 |
|---------------|------|---------|------|-----------|----------|
| TC-BB-PUR-01 | "" | "有効住所" | 有効カート | 境界値（名前空） | 名前空エラー |
| TC-BB-PUR-02 | "有効名前" | "" | 有効カート | 境界値（住所空） | 住所空エラー |
| TC-BB-PUR-03 | "a" | "a" | 有効カート | 境界値（1文字） | 購入成功 |
| TC-BB-PUR-04 | null | "有効住所" | 有効カート | 境界値（null） | 名前空エラー |
| TC-BB-PUR-05 | "有効名前" | null | 有効カート | 境界値（null） | 住所空エラー |
| TC-BB-PUR-06 | "有効名前" | "有効住所" | null | 境界値（nullカート） | カート空エラー |
| TC-BB-PUR-07 | "有効名前" | "有効住所" | 空リスト | 境界値（空カート） | DB登録失敗 |
| TC-BB-PUR-08 | 最大長文字列 | 最大長文字列 | 有効カート | 境界値（最大長） | 購入成功 |
| TC-BB-PUR-09 | 最大長+1文字列 | "有効住所" | 有効カート | 境界値（最大超過） | 購入成功（またはエラー） |

---

## 4. 商品検索DAO（ProductDAO）

### 同値クラス分析

| 入力項目 | 同値クラス | 代表値 | 期待結果 |
|---------|-----------|--------|----------|
| keyword | 有効なキーワード | "商品名" | 該当商品リスト |
| | 空文字列 | "" | 全商品リスト |
| | null | null | 全商品リスト |
| | 存在しないキーワード | "xxx" | 空リスト |
| price | 有効な価格 | 1000 | 該当商品リスト |
| | 無効な価格 | -1 | 空リスト |
| | 境界価格 | 0 | 該当商品リスト（あれば） |

### 境界値分析

| テストケースID | keyword | price | テスト種別 | 期待結果 |
|---------------|---------|-------|-----------|----------|
| TC-BB-DAO-PROD-01 | null | - | 同値クラス | 全商品検索 |
| TC-BB-DAO-PROD-02 | "" | - | 境界値 | 全商品検索 |
| TC-BB-DAO-PROD-03 | "a" | - | 境界値（1文字） | 該当商品検索 |
| TC-BB-DAO-PROD-04 | "商品名" | - | 同値クラス | 該当商品検索 |
| TC-BB-DAO-PROD-05 | "商品名" | 0 | 境界値（価格0） | 価格0の商品検索 |
| TC-BB-DAO-PROD-06 | "商品名" | 1 | 境界値（最低価格） | 最低価格商品検索 |
| TC-BB-DAO-PROD-07 | "商品名" | 999999 | 境界値（高価格） | 高価格商品検索 |
| TC-BB-DAO-PROD-08 | "商品名" | -1 | 境界値（負の価格） | 空リスト |

---

## 5. 購入DAO（PurchaseDAO）

### 同値クラス分析

| 入力項目 | 同値クラス | 代表値 | 期待結果 |
|---------|-----------|--------|----------|
| minPrice | 有効な下限価格 | 1000 | 価格下限付き検索 |
| | null | null | 下限なし検索 |
| | 負の価格 | -1 | 空リスト |
| maxPrice | 有効な上限価格 | 10000 | 価格上限付き検索 |
| | null | null | 上限なし検索 |
| | 負の価格 | -1 | 空リスト |
| productName | 有効な商品名 | "商品名" | 商品名付き検索 |
| | 空文字列 | "" | 商品名なし検索 |
| | null | null | 商品名なし検索 |
| cart | 有効な商品リスト | 商品あり | 登録成功 |
| | 空リスト | 空リスト | 登録成功（0件） |
| | null | null | 登録失敗 |

### 境界値分析

| テストケースID | minPrice | maxPrice | productName | テスト種別 | 期待結果 |
|---------------|----------|----------|-------------|-----------|----------|
| TC-BB-DAO-PUR-01 | null | null | null | 同値クラス | 全購入検索 |
| TC-BB-DAO-PUR-02 | 0 | null | null | 境界値（下限0） | 価格0以上検索 |
| TC-BB-DAO-PUR-03 | 1 | null | null | 境界値（下限1） | 価格1以上検索 |
| TC-BB-DAO-PUR-04 | null | 0 | null | 境界値（上限0） | 価格0以下検索 |
| TC-BB-DAO-PUR-05 | null | 1 | null | 境界値（上限1） | 価格1以下検索 |
| TC-BB-DAO-PUR-06 | -1 | null | null | 境界値（負の下限） | 空リスト |
| TC-BB-DAO-PUR-07 | null | -1 | null | 境界値（負の上限） | 空リスト |
| TC-BB-DAO-PUR-08 | 1000 | 1000 | null | 境界値（下限=上限） | 価格1000のみ検索 |
| TC-BB-DAO-PUR-09 | 1000 | 999 | null | 境界値（下限>上限） | 空リスト |
| TC-BB-DAO-PUR-10 | null | null | "" | 境界値（空文字列） | 全購入検索 |
| TC-BB-DAO-PUR-11 | null | null | "a" | 境界値（1文字） | 該当商品検索 |
| TC-BB-DAO-PUR-12 | 有効カート | - | - | 同値クラス | 登録成功 |
| TC-BB-DAO-PUR-13 | null | - | - | 境界値（null） | 登録失敗 |

---

## テスト戦略のまとめ

### 同値クラス分析の目的
- 入力値を意味のあるグループに分類
- 各グループから代表値を選択してテスト
- テストケース数を削減しつつ網羅性を確保

### 境界値分析の目的
- エラーが発生しやすい境界値を重点的にテスト
- 最小値、最大値、その前後の値を網羅
- オフバイワンエラーを検出

### 組合せテストの考慮
- 複数の入力項目がある場合は重要な組合せをテスト
- 全組合せは現実的ではないため、直交表やペアワイズ法を検討
- エラーが発生しやすい組合せを優先

### テストカバレッジ目標
- **同値クラス網羅**: 100%（すべての同値クラスをテスト）
- **境界値網羅**: 100%（すべての境界値をテスト）
- **機能網羅**: 100%（すべての機能仕様をテスト）
